{"version":3,"file":"joelms.js","sources":["../joelms.js"],"sourcesContent":["const isEventAttribute = attr => /^on/.test(attr);\n\nconst extractEventName = attr => attr.replace('on', '').toLowerCase();\n\nconst renderElement = (vNode, update, model, view, root, parent, index = 0) => {\n  // debugger;\n\n  let el;\n\n  if (parent.childNodes.length >= index + 1) {\n    el = parent.childNodes[index];\n\n    if (typeof vNode === 'string') {\n      if (el.data !== vNode) {\n        el.data = vNode;\n        debugger;\n      }\n\n      return el;\n    } else {\n      const validItems = vNode.children.filter(item => !!item);\n\n      validItems.forEach((item, i) =>\n        renderElement(item, update, model, view, root, el, i)\n      );\n\n      return el;\n    }\n  } else {\n    if (typeof vNode === 'string') {\n      debugger;\n      el = document.createTextNode(vNode);\n\n      parent.appendChild(el);\n\n      return el;\n    }\n\n    el = document.createElement(vNode.type);\n\n    // Adicionando os atributos ao novo node\n    Object.keys(vNode.attrs).forEach(key => {\n      if (isEventAttribute(key)) {\n        el.addEventListener(extractEventName(key), e =>\n          _update(\n            { type: vNode.attrs[key], payload: e },\n            model,\n            update,\n            view,\n            root\n          )\n        );\n      } else {\n        el.setAttribute(key, vNode.attrs[key]);\n      }\n    });\n  }\n\n  const validItems = vNode.children.filter(item => !!item);\n\n  validItems.forEach((item, i) =>\n    renderElement(item, update, model, view, root, el, i)\n  );\n\n  parent.appendChild(el);\n\n  return el;\n};\n\nconst createElement = (type, attrs = {}, children = []) => {\n  return { type: type, attrs: attrs, children: children };\n};\n\nconst _update = (payload, model, update, view, root) => {\n  const newModel = update(payload, model);\n\n  render(root, view, update, newModel);\n};\n\nconst render = (root, view, update, model) => {\n  // if (root.childElementCount) {\n  //   root.removeChild(root.firstChild);\n  // }\n\n  renderElement(\n    view(model),\n    update,\n    model,\n    view,\n    root,\n    document.getElementById(root),\n    0\n  );\n};\n\nconst beginnerProgram = ({ root, view, update, model }) => {\n  render(root, view, update, model);\n};\n\nconst p = createElement.bind(null, 'p');\nconst div = createElement.bind(null, 'div');\nconst span = createElement.bind(null, 'span');\nconst section = createElement.bind(null, 'section');\nconst nav = createElement.bind(null, 'nav');\n\nconst table = createElement.bind(null, 'table');\nconst td = createElement.bind(null, 'tr');\nconst tr = createElement.bind(null, 'tr');\nconst tbody = createElement.bind(null, 'tbody');\nconst thead = createElement.bind(null, 'thead');\nconst button = createElement.bind(null, 'button');\nconst input = createElement.bind(null, 'input');\n\nconst h1 = createElement.bind(null, 'h1');\nconst h2 = createElement.bind(null, 'h2');\nconst h3 = createElement.bind(null, 'h3');\nconst h4 = createElement.bind(null, 'h4');\nconst h5 = createElement.bind(null, 'h5');\nconst h6 = createElement.bind(null, 'h6');\n\nconst customEl = type => createElement.bind(null, type);\nconst text = value => value;\n\nexport {\n  p,\n  div,\n  span,\n  section,\n  nav,\n  table,\n  td,\n  tr,\n  tbody,\n  thead,\n  button,\n  input,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  customEl,\n  text,\n  render,\n  beginnerProgram,\n};\n"],"names":[],"mappings":"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"}